!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).react={},e.react)}(this,function(e,t){function o(){}var r=t.createContext(null),u=r.Provider,n=function(e){return e};function a(e){return void 0===e&&(e=r),function(r,u,a){void 0===u&&(u=n),void 0===a&&(a=[]);var i=t.useReducer(function(e){return e+1},0)[1],s=t.useContext(e);if(!s)throw new Error("[reatom] The provider is not defined");var c=t.useRef({store:s,atom:void 0,selector:u,deps:a,atomValue:void 0,selectorValue:void 0,unsubscribe:o,mountStatus:"init"}).current;if(c.selector=u,s!==c.store||r!==c.atom)c.store=s,c.atom=r,c.deps=a,c.unsubscribe(),c.unsubscribe=s.subscribe(c.atom,function(e){if(!Object.is(c.atomValue,e)){c.atomValue=e;var t=c.selector(e);Object.is(t,c.selectorValue)||(c.selectorValue=t,"init"===c.mountStatus?c.mountStatus="outOfDate":i())}}),c.atomValue=c.store.getState(r),c.selectorValue=c.selector(c.atomValue);else{var f=c.store.getState(c.atom);Object.is(f,c.atomValue)&&a.length===c.deps.length&&!a.some(function(e,t){return!Object.is(e,c.deps[t])})||(c.deps=a,c.atomValue=f,c.selectorValue=c.selector(c.atomValue))}return t.useEffect(function(){return"outOfDate"===c.mountStatus&&(c.mountStatus="upToDate",i()),c.mountStatus="upToDate",function(){return c.unsubscribe()}},[]),c.selectorValue}}var i=a();function s(e){return void 0===e&&(e=r),function(o,r){void 0===r&&(r=[]);var u=t.useContext(e);if(!u)throw new Error("[reatom] The provider is not defined");if("function"!=typeof o)throw new TypeError("[reatom] `useAction` argument must be a function");return t.useCallback(function(){var e=o.apply(void 0,[].slice.call(arguments));e&&u.dispatch(e)},r.concat(u))}}var c=s();e.Provider=u,e.context=r,e.createActionHook=s,e.createAtomHook=a,e.useAction=c,e.useAtom=i});
//# sourceMappingURL=index.umd.js.map
